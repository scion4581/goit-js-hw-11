{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error-icon.png","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nexport default class PixabayAPI {\n    static #PIXABAY_API_URL = 'https://pixabay.com/api/';\n    #apiKey;\n    constructor(apiKey) {\n        this.#apiKey = apiKey;\n    }\n\n    searchImages(urlParams) {\n        return this.#fetch('', urlParams);\n    }\n\n    // searchVideos(urlParams) {\n    //     return this.#fetch('videos/', urlParams);\n    // }\n\n    #fetch(resourcePath, urlParams) {\n        return fetch(PixabayAPI.#PIXABAY_API_URL\n            + resourcePath\n            + '?'\n            + new URLSearchParams({ ...{ 'key': this.#apiKey }, ...urlParams }))\n            .then(response => response.json());\n    }\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBrZVhDoIwDIUrgfDXm+hRvBFwEr0BXsXjsJnMFVkYsvUV4SWL6Nr3MWgrUUbW2sYY6zSLY3M+Zc7cOWr9evqvL5J18av1OVRVVUdI4c6HwTxIKY5FJ/nbXA3ZYw4hR5hnIZK5MeaKDFMxC8jX3PapRPTi5lJOQWzPewHQpgz49xxkPrmcKwJyEGQe55UEVNdV64P5cmwm1tSEHe+hfAj4hUwAlTmrIKWKglzqGkl1gmg2hVmjnj0QEJuHxxK/EwiRqkGqFqmE433YaJpSFBttDnrfUxACSsWw1+LmJMhWrcyDjoBkzY+AQPM9EMl81QdhLJxOrvGfZ1L96bvblvExaj4JXtJj+QAn5UUxjHYd+gAAAABJRU5ErkJggg==\"","'use strict';\n\nexport default function renderGallery(images){\n    return images.map(img => createGalleryItemMarkup(img)).join(\"\");\n}\n\nfunction createGalleryItemMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    let galleryItemMarkup = `<li class=\"gallery-item\">\n                <a class=\"gallery-image-link\" href=\"${largeImageURL}\">\n                    <img \n                        class=\"gallery-image\" \n                        src=\"${webformatURL}\" \n                        alt=\"${tags}\" \n                    />\n                </a>\n                <ul class=\"gallery-item-stats\">`;\n    \n    for (const [key, value] of Object.entries({ likes, views, comments, downloads })) {\n        galleryItemMarkup += `<li class=\"gallery-item-stats-item\">\n                                <p class=\"gallery-item-stats-label\">${key}</p>\n                                <p class=\"gallery-item-stats-value\">${value}</p>\n                              </li>`;\n    }\n    \n    return galleryItemMarkup += '</ul></li>';\n}\n","'use strict';\n\nimport PixabayAPI from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport errorIcon from '/img/error-icon.png';\nimport renderGallery from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\n\nconst PIXABAY_API_KEY = '25546966-f3ef2260a4c78c9f4c7cc9e45';\nconst SEARCH_IMAGES_REQUEST_OPTIONS = {\n    'image_type': 'photo',\n    'orientation': 'horizontal',\n    'safesearch': true\n};\n\nconst pixabayApi = new PixabayAPI(PIXABAY_API_KEY);\nconst gallerySlider = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionsPosition: 'bottom',\n});\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\n\nfunction showLoader() {\n    loaderElement.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    loaderElement.classList.add('hidden');\n}\n\nsearchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const searchForm = event.currentTarget;\n    const searchText = searchForm.searchField.value.trim();\n    if (searchText === '') {\n        showErrorMessage('You have to write something!');\n        return;\n    }\n\n    galleryContainer.innerHTML = '';\n    showLoader();\n\n    pixabayApi.searchImages({\n        ...{ 'q': searchText },\n        ...SEARCH_IMAGES_REQUEST_OPTIONS\n    }).then(images => {\n        if (images.total === 0) {\n            showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            galleryContainer.innerHTML = renderGallery(images.hits);\n            gallerySlider.refresh();\n        }\n\n    }).catch(error => {\n        showErrorMessage(error.message);\n    }).finally(() => {\n        hideLoader();\n        searchForm.reset();\n    });\n});\n\nfunction showErrorMessage(msgText) {\n    iziToast.error({\n        title: 'Error',\n        message: msgText,\n        iconUrl: errorIcon,\n        position: 'topRight',\n        titleColor: '#FFF',\n        messageColor: '#FFF',\n        backgroundColor: '#EF4040',\n        theme: 'dark',\n        progressBar: false,\n        close: false,\n    });\n}"],"names":["_PixabayAPI","apiKey","__privateAdd","_fetch","_apiKey","__privateSet","urlParams","__privateMethod","fetch_fn","_PIXABAY_API_URL","resourcePath","__privateGet","response","PixabayAPI","errorIcon","renderGallery","images","img","createGalleryItemMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItemMarkup","key","value","PIXABAY_API_KEY","SEARCH_IMAGES_REQUEST_OPTIONS","pixabayApi","gallerySlider","SimpleLightbox","searchForm","galleryContainer","loaderElement","showLoader","hideLoader","event","searchText","showErrorMessage","error","msgText","iziToast"],"mappings":"8oCAEe,MAAMA,EAAN,MAAMA,CAAW,CAG5B,YAAYC,EAAQ,CAYpBC,EAAA,KAAAC,GAbAD,EAAA,KAAAE,EAAA,QAEIC,EAAA,KAAKD,EAAUH,EAClB,CAED,aAAaK,EAAW,CACpB,OAAOC,EAAA,KAAKJ,EAAAK,GAAL,UAAY,GAAIF,EAC1B,CAaL,EArBWG,EAAA,YACPL,EAAA,YAaAD,EAAA,YAAAK,EAAM,SAACE,EAAcJ,EAAW,CAC5B,OAAO,MAAMK,EAAAX,EAAWS,GAClBC,EACA,IACA,IAAI,gBAAgB,CAAO,IAAOC,EAAA,KAAKP,GAAW,GAAGE,CAAS,CAAE,CAAC,EAClE,KAAKM,GAAYA,EAAS,KAAM,CAAA,CACxC,EApBDV,EADiBF,EACVS,EAAmB,4BADf,IAAMI,EAANb,ECFf,MAAec,EAAA,ihBCEA,SAASC,EAAcC,EAAO,CACzC,OAAOA,EAAO,IAAIC,GAAOC,EAAwBD,CAAG,CAAC,EAAE,KAAK,EAAE,CAClE,CAEA,SAASC,EAAwB,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACvG,IAAIC,EAAoB;AAAA,sDAC0BN,CAAa;AAAA;AAAA;AAAA,+BAGpCD,CAAY;AAAA,+BACZE,CAAI;AAAA;AAAA;AAAA,iDAK/B,SAAW,CAACM,EAAKC,CAAK,IAAK,OAAO,QAAQ,CAAE,MAAAN,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,CAAA,EAC3EC,GAAqB;AAAA,sEACyCC,CAAG;AAAA,sEACHC,CAAK;AAAA,qCAIvE,OAAOF,GAAqB,YAChC,CCjBA,MAAMG,EAAkB,qCAClBC,EAAgC,CAClC,WAAc,QACd,YAAe,aACf,WAAc,EAClB,EAEMC,EAAa,IAAIlB,EAAWgB,CAAe,EAC3CG,EAAgB,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,IACd,iBAAkB,QACpB,CAAC,EAEKC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAgB,SAAS,cAAc,SAAS,EAEtD,SAASC,GAAa,CAClBD,EAAc,UAAU,OAAO,QAAQ,CAC3C,CAEA,SAASE,GAAa,CAClBF,EAAc,UAAU,IAAI,QAAQ,CACxC,CAEAF,EAAW,iBAAiB,SAAWK,GAAU,CAC7CA,EAAM,eAAc,EACpB,MAAML,EAAaK,EAAM,cACnBC,EAAaN,EAAW,YAAY,MAAM,KAAI,EACpD,GAAIM,IAAe,GAAI,CACnBC,EAAiB,8BAA8B,EAC/C,MACH,CAEDN,EAAiB,UAAY,GAC7BE,IAEAN,EAAW,aAAa,CACf,EAAKS,EACV,GAAGV,CACX,CAAK,EAAE,KAAKd,GAAU,CACVA,EAAO,QAAU,EACjByB,EAAiB,0EAA0E,GAE3FN,EAAiB,UAAYpB,EAAcC,EAAO,IAAI,EACtDgB,EAAc,QAAO,EAGjC,CAAK,EAAE,MAAMU,GAAS,CACdD,EAAiBC,EAAM,OAAO,CACtC,CAAK,EAAE,QAAQ,IAAM,CACbJ,IACAJ,EAAW,MAAK,CACxB,CAAK,CACL,CAAC,EAED,SAASO,EAAiBE,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,QAAS7B,EACT,SAAU,WACV,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,MAAO,OACP,YAAa,GACb,MAAO,EACf,CAAK,CACL"}